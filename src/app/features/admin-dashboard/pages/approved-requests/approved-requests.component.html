<div class="approved-requests-container">
  <div class="page-header">
    <div class="header-left">
      <button class="btn btn-ghost" routerLink="/admin-dashboard">
        <fa-icon [icon]="faArrowLeft" class="me-2"></fa-icon>
        {{ 'Back' | translate }}
      </button>
    </div>
    <div class="header-center">
      <fa-icon [icon]="faCircleCheck" class="header-icon"></fa-icon>
      <h2 class="page-title">{{ 'ApprovedRequests' | translate }}</h2>
    </div>
    <div class="header-right"></div>
  </div>

  <div class="content-container">
    <app-material-data-table
      [data]="approvedRequests"
      [columns]="tableColumns"
      [actions]="tableActions"
      [isLoading]="isLoading"
      [error]="error"
      [emptyMessage]="'NoApprovedRequests'"
      [emptyDescription]="'NoRequestsApprovedYet'"
      [loadingMessage]="'LoadingApprovedRequests'"
      [showActions]="false"
      (retry)="fetchApprovedRequests()">
      
      <!-- Templates for custom cell rendering -->
      <ng-template #nameTemplate let-row>
        <div class="d-flex align-items-center justify-content-center gap-2">
          <div class="avatar-sm">
            <fa-icon [icon]="faCircleCheck" class="avatar-icon"></fa-icon>
          </div>
          <span class="name-text">{{ row.fullName }}</span>
        </div>
      </ng-template>

      <ng-template #phoneTemplate let-row>
        <div class="d-flex align-items-center justify-content-center">
          <span class="phone-text">{{ row.phoneNumber }}</span>
        </div>
      </ng-template>

      <ng-template #departmentTemplate let-row>
        <div class="d-flex align-items-center justify-content-center">
          <span *ngIf="row.department; else noDepartment" class="department-text">
            {{ row.department }}
          </span>
          <ng-template #noDepartment>
            <span class="text-muted">{{ 'NotSpecified' | translate }}</span>
          </ng-template>
        </div>
      </ng-template>

      <ng-template #dateTemplate let-row>
        <div class="d-flex align-items-center justify-content-center">
          <span class="date-text">{{ row.approvedDate | date:'MMM dd, yyyy HH:mm' }}</span>
        </div>
      </ng-template>

      <ng-template #statusTemplate let-row>
        <div class="d-flex align-items-center justify-content-center">
          <span class="badge badge-success">
            <fa-icon [icon]="faCircleCheck" class="me-1"></fa-icon>
            {{ 'Approved' | translate }}
          </span>
        </div>
      </ng-template>
    </app-material-data-table>
  </div>
</div>

