<div class="work-rules-container">
  <div class="page-header">
    <div class="header-left">
      <button class="btn btn-ghost" routerLink="/admin-dashboard">
        <fa-icon [icon]="faArrowLeft" class="me-2"></fa-icon>
        {{ 'Back' | translate }}
      </button>
      <div class="page-title">
        <fa-icon [icon]="faGear" class="me-2"></fa-icon>
        {{ 'WorkRules' | translate }}
      </div>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" (click)="addWorkRule()">
        <fa-icon [icon]="faPlus" class="me-2"></fa-icon>
        {{ 'AddWorkRule' | translate }}
      </button>
    </div>
  </div>

  <div class="content-container">
    <ng-container *ngIf="isLoading; else loadedContent">
      <div class="glass-card h-100">
        <div class="glass-body p-4">
          <app-shimmer></app-shimmer>
        </div>
      </div>
    </ng-container>

    <ng-template #loadedContent>
      <div *ngIf="error" class="alert alert-danger" role="alert">
        {{ error }}
      </div>

      <div *ngIf="!error" class="glass-card">
        <div class="glass-body p-4">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h5 class="mb-0">{{ 'WorkRules' | translate }}</h5>
            <span class="badge bg-purple-accent">{{ workRules.length }}</span>
          </div>

          <div *ngIf="workRules.length > 0; else noWorkRules" class="rules-grid">
            <div *ngFor="let rule of workRules" class="rule-card">
              <div class="rule-header">
                <div class="rule-title">
                  <h6 class="mb-1">{{ rule.title }}</h6>
                  <span class="rule-category">{{ rule.category }}</span>
                </div>
                <div class="rule-actions">
                  <button 
                    class="btn btn-sm btn-outline-primary me-1" 
                    (click)="editWorkRule(rule)"
                    title="{{ 'Edit' | translate }}">
                    <fa-icon [icon]="faEdit"></fa-icon>
                  </button>
                  <button 
                    class="btn btn-sm btn-outline-danger" 
                    (click)="deleteWorkRule(rule)"
                    title="{{ 'Delete' | translate }}">
                    <fa-icon [icon]="faTrash"></fa-icon>
                  </button>
                </div>
              </div>
              <div class="rule-description">
                <p class="mb-2">{{ rule.description }}</p>
                <div class="rule-footer">
                  <small class="text-muted">
                    {{ 'Created' | translate }}: {{ rule.createdAt | date:'MMM dd, yyyy' }}
                  </small>
                  <div class="rule-status">
                    <label class="form-check form-switch">
                      <input 
                        class="form-check-input" 
                        type="checkbox" 
                        [checked]="rule.isActive"
                        (change)="toggleRuleStatus(rule)">
                      <span class="form-check-label">
                        {{ rule.isActive ? ('Active' | translate) : ('Inactive' | translate) }}
                      </span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <ng-template #noWorkRules>
            <div class="text-center py-5">
              <fa-icon [icon]="faGear" class="display-1 text-muted mb-3"></fa-icon>
              <h5 class="text-muted">{{ 'NoWorkRules' | translate }}</h5>
              <p class="text-muted">{{ 'CreateYourFirstWorkRule' | translate }}</p>
              <button class="btn btn-primary" (click)="addWorkRule()">
                <fa-icon [icon]="faPlus" class="me-2"></fa-icon>
                {{ 'AddWorkRule' | translate }}
              </button>
            </div>
          </ng-template>
        </div>
      </div>
    </ng-template>
  </div>
</div>

